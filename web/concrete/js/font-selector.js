!function(a,b){"use strict";function c(a,c){var d=this,c=b.extend({inputName:!1,appendTo:document.body},c);d.options=c,d.$element=a,d.$container=b(d.options.appendTo),d._chooseTemplate=_.template(d.chooseTemplate,{options:d.options}),d._selectorTemplate=_.template(d.selectorWidgetTemplate,{options:d.options}),d.$element.append(d._chooseTemplate),d.$container.append(d._selectorTemplate),d.$widget=d.$container.find("div.ccm-font-selector-widget"),d.$fontMenu=d.$widget.find("select[data-font-selector-field=font]"),d.$sliders=d.$widget.find("div.ccm-font-selector-slider"),d.$sliders.slider({min:0,max:64,value:0,create:function(){b(this).parent().find("span").html("0px")},slide:function(a,c){b(this).parent().find("span").html(c.value+"px")}}),d.$widget.find("input[data-font-selector-field=color]").spectrum(),d.$widget.find("div.ccm-font-selector-actions button").on("click.font-selector",function(a){return d.save(a),!1}),d.$fontMenu.on("change",function(){var a=b(this).val();b(this).css("font-family",a)}),b.each(d.fonts,function(a,b){d.$fontMenu.append('<option value="'+b+'">'+b+"</option>")}),d.$element.on("click.font-selector","div.ccm-font-selector-select-wrapper",function(){var a=b(this).offset();return a.left+=b(this).width()+10,a.top-=180,d.$widget.css({top:a.top,left:a.left}).show().on("click.font-selector",function(a){a.stopPropagation()}),b(document).on("click.font-selector",function(a){d.closeSelector(a)}),!1})}c.prototype={fonts:["Arial","Helvetica","Georgia","Verdana","Trebuchet MS","Book Antiqua","Tahoma","Times New Roman","Courier New","Arial Black","Comic Sans MS"],chooseTemplate:'<div class="ccm-font-selector-select-wrapper"><span class="ccm-font-selector-select">T</span></div>',selectorWidgetTemplate:'<div class="ccm-ui ccm-font-selector-widget"><div><select data-font-selector-field="font"><option value="">Choose Font</option></select> <input type="text" data-font-selector-field="color"></div><div class="checkbox"><label><input type="checkbox" class="ccm-flat-checkbox" data-font-selector-field="bold"> Bold</label></div><div class="checkbox"><label><input type="checkbox" class="ccm-flat-checkbox" data-font-selector-field="italic"> Italic</label></div><div class="checkbox"><label><input type="checkbox" class="ccm-flat-checkbox" data-font-selector-field="underline"> Underline</label></div><div class="checkbox"><label><input type="checkbox" class="ccm-flat-checkbox" data-font-selector-field="uppercase"> Uppercase</label></div><div><label>Font Size</label><div data-font-selector-field="size"><div class="ccm-font-selector-slider"></div><span class="ccm-font-selector-slider-value"></span></div></div><div><label>Letter Spacing</label><div data-font-selector-field="letter-spacing"><div class="ccm-font-selector-slider"></div><span class="ccm-font-selector-slider-value"></span></div></div><div><label>Line Height</label><div data-font-selector-field="line-height"><div class="ccm-font-selector-slider"></div><span class="ccm-font-selector-slider-value"></span></div></div><div class="ccm-font-selector-actions"><button class="btn btn-primary">Save</button></div></div>',closeSelector:function(){var a=this;a.$widget.hide(),b(document).unbind("click.font-selector")},save:function(a){var b=this;b.closeSelector(a)}},b.fn.concreteFontSelector=function(a){return b.each(b(this),function(){new c(b(this),a)})},a.ConcreteFontSelector=c}(this,$);