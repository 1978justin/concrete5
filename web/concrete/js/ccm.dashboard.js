var CCMDashboard=function(){getBackgroundImageData=function(e,t){$.getJSON(CCM_TOOLS_PATH+"/dashboard/get_image_data",{image:e},function(e){if(e&&t){var n="<div>";n+="<strong>"+e.title+"</strong> "+ccmi18n.authoredBy+" ";e.link?n+='<a target="_blank" href="'+e.link+'">'+e.author+"</a>":n+=e.author;$('<div id="ccm-dashboard-image-caption" class="ccm-ui"/>').html(n).appendTo(document.body).show();setTimeout(function(){$("#ccm-dashboard-image-caption").fadeOut(1e3,"easeOutExpo")},5e3)}})};setupHelp=function(){var e=$("#ccm-page-help").popover({trigger:"click",content:function(){var e=$(this).attr("id")+"-content";return $("#"+e).html()},placement:"bottom",html:!0}).click(function(e){e.stopPropagation()});$(document).click(function(){var t=e.data("popover");t&&t.hide()})};setupResultMessages=function(){if($("#ccm-dashboard-result-message").length>0){if($(".ccm-pane").length>0){var e=$(".ccm-pane").parent().attr("class"),t=$(".ccm-pane").parent().parent().attr("class"),n=$("#ccm-dashboard-result-message").html();$("#ccm-dashboard-result-message").html('<div class="'+t+'"><div class="'+e+'">'+n+"</div></div>").fadeIn(400)}}else $("#ccm-dashboard-result-message").fadeIn(200)};setupTooltips=function(){$(".launch-tooltip").tooltip({placement:"bottom"})};return{start:function(e){e.image&&(e.imagetime?$.backstretch(e.image,{speed:e.imagetime}):$.backstretch(e.image));e.filename&&getBackgroundImageData(e.filename,e.displayCaption);setupHelp();setupTooltips();setupResultMessages()},closePane:function(e){$(e).closest("div.ccm-pane").fadeOut(120,"easeOutExpo")},equalizeMenus:function(){if($(window).width()<560){$("div.dashboard-icon-list div.well").css("visibility","visible");return!1}var e=-1,t,n=0,r=new Array;$("ul.nav-list").each(function(){if($(this).position().top!=n){e++;r[e]=new Array}r[e].push($(this));n=$(this).position().top});for(t=0;t<r.length;t++){var i=0;for(e=0;e<r[t].length;e++){var s=r[t][e];s.height()>i&&(i=s.height())}for(e=0;e<r[t].length;e++){var s=r[t][e];s.css("height",i)}}$("div.dashboard-icon-list div.well").css("visibility","visible")},toggleQuickNav:function(){var e=$("#ccm-add-to-quick-nav");e.hasClass("ccm-icon-favorite-selected")?e.removeClass("ccm-icon-favorite-selected").addClass("ccm-icon-favorite"):e.removeClass("ccm-icon-favorite").addClass("ccm-icon-favorite-selected");var t=$("#ccm-nav-dashboard"),n=e.parent().parent().parent().find("h3");n.css("display","inline");n.effect("transfer",{to:t,easing:"easeOutExpo"},600);$.get(CCM_TOOLS_PATH+"/dashboard/add_to_quick_nav",{cID:cID,token:token},function(e){var t=$("<div />").html(e);$("#ccm-intelligent-search-results").html(t.find("#ccm-intelligent-search-results").html());$("#ccm-dashboard-overlay").html(t.find("#ccm-dashboard-overlay").html());t=!1})}}}();