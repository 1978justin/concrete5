!function(a,b){"use strict";function c(a,c){var d=this,c=b.extend({inputName:!1,unit:"px",appendTo:document.body},c);d.options=c,d.opened=!1,d.$element=a,d.$container=b(d.options.appendTo),d._chooseTemplate=_.template(d.chooseTemplate,{options:d.options}),d._selectorTemplate=_.template(d.selectorWidgetTemplate,{options:d.options}),d.$element.append(d._chooseTemplate),d.$widget=b(d._selectorTemplate),d.$container.append(d.$widget),d.$widget.find("div.ccm-style-customizer-palette-actions button").on("click.style-customizer-palette",function(a){return d.save(a),!1}),d.$element.on("click.style-customizer-palette","div[data-launch=style-customizer-palette]",function(a){if(d.opened)d.closeSelector(a);else{var c=d.getPosition(b(this));d.$widget.css({top:c.top,left:c.left}).show().on("click.style-customizer-palette",function(a){a.stopPropagation()}),b(document).on("click.style-customizer-palette",function(a){d.closeSelector(a)}),d.opened=!0}return!1})}c.prototype={setValue:function(a,b){var c=this;c.$element.find("input[data-style-customizer-input="+a+"]").val(b)},getPosition:function(a){var b=a.offset();return b.left+=a.width()+10,b.top-=180,b},getValue:function(a){var b=this;return b.$element.find("input[data-style-customizer-input="+a+"]").val()},closeSelector:function(){var a=this;a.$widget.hide(),a.opened=!1,b(document).unbind("click.style-customizer-palette")},updateSwatch:function(){alert("You must implement this method updateSwatch.")},save:function(a){var b=this;b.updateSwatch(),b.closeSelector(a)}},a.ConcreteStyleCustomizerPalette=c}(this,$),!function(a,b){"use strict";function c(a,c){var d=this,c=b.extend({inputName:!1,value:!1},c);ConcreteStyleCustomizerPalette.call(d,a,c),d.$widget.find("div[data-style-customizer-field=image]").concreteFileSelector({inputName:d.options.inputName})}c.prototype=Object.create(ConcreteStyleCustomizerPalette.prototype),c.prototype.chooseTemplate='<div data-launch="style-customizer-palette"><input type="hidden" name="<%=options.inputName%>[image]" data-style-customizer-input="image" /><div class="ccm-style-customizer-image ccm-ui"><i class="glyphicon glyphicon-picture"</div></div>',c.prototype.selectorWidgetTemplate='<div class="ccm-ui ccm-style-customizer-palette"><% if (options.value) { %><div><label>Current Image</label><div><img src="<%=options.value%>" /></div></div><% } %><div><label>Image</label><div data-style-customizer-field="image" class="ccm-file-selector"></div></div><div class="ccm-style-customizer-palette-actions"><button class="btn btn-primary">Save</button></div></div>',c.prototype.getPosition=function(a){var b=a.offset();return b.left+=a.width()+10,b.top-=20,b},c.prototype.updateSwatch=function(){var a=this,b=a.$element.find("div.ccm-style-customizer-size");b.html(a.getValue("size")+a.options.unit)},c.prototype.save=function(a){var b=this;b.setValue("size",b.$widget.find("div[data-style-customizer-field=size] div.ccm-style-customizer-slider").slider("value")),b.updateSwatch(),b.closeSelector(a)},b.fn.concreteStyleCustomizerImageSelector=function(a){return b.each(b(this),function(){new c(b(this),a)})},a.ConcreteStyleCustomizerImageSelector=c}(this,$),!function(a,b){"use strict";function c(a,c){var d=this,c=b.extend({inputName:!1,unit:"px",value:0,appendTo:document.body},c);ConcreteStyleCustomizerPalette.call(d,a,c),d.$slider=d.$widget.find("div.ccm-style-customizer-slider"),d.$slider.slider({min:0,max:400,value:d.options.value,create:function(){b(this).parent().find("span").html(d.options.value+d.options.unit)},slide:function(a,c){b(this).parent().find("span").html(c.value+d.options.unit)}})}c.prototype=Object.create(ConcreteStyleCustomizerPalette.prototype),c.prototype.chooseTemplate='<div data-launch="style-customizer-palette"><input type="hidden" name="<%=options.inputName%>[size]" data-style-customizer-input="size" /><div class="ccm-style-customizer-size"><%=options.value + options.unit%></div></div>',c.prototype.selectorWidgetTemplate='<div class="ccm-ui ccm-style-customizer-palette"><div><label>Size</label><div data-style-customizer-field="size"><div class="ccm-style-customizer-slider"></div><span class="ccm-style-customizer-slider-value"><%=options.value%><%=options.unit%></span></div></div><div class="ccm-style-customizer-palette-actions"><button class="btn btn-primary">Save</button></div></div>',c.prototype.getPosition=function(a){var b=a.offset();return b.left+=a.width()+10,b.top-=20,b},c.prototype.updateSwatch=function(){var a=this,b=a.$element.find("div.ccm-style-customizer-size");b.html(a.getValue("size")+a.options.unit)},c.prototype.save=function(a){var b=this;b.setValue("size",b.$widget.find("div[data-style-customizer-field=size] div.ccm-style-customizer-slider").slider("value")),b.updateSwatch(),b.closeSelector(a)},b.fn.concreteSizeSelector=function(a){return b.each(b(this),function(){new c(b(this),a)})},a.ConcreteSizeSelector=c}(this,$),!function(a,b){"use strict";function c(a,c){var d=this,c=b.extend({inputName:!1,value:{}},c);if(ConcreteStyleCustomizerPalette.call(d,a,c),d.$fontMenu=d.$widget.find("select[data-style-customizer-field=font]"),d.$sliders=d.$widget.find("div.ccm-style-customizer-slider"),d.$sliders.slider({min:0,max:64,value:0,create:function(){b(this).parent().find("span.ccm-style-customizer-slider-value span.ccm-style-customizer-number").html("0")},slide:function(a,c){b(this).parent().find("span.ccm-style-customizer-slider-value span.ccm-style-customizer-number").html(c.value)}}),d.$colorpicker=d.$widget.find("input[data-style-customizer-field=color]"),d.$colorpicker.spectrum({preferredFormat:"rgb",showAlpha:!0}),d.$fontMenu.on("change",function(){var a=b(this).val();b(this).css("font-family",a)}),b.each(d.fonts,function(a,b){d.$fontMenu.append('<option value="'+b+'">'+b+"</option>")}),d.options.value.fontFamily&&(d.$fontMenu.val(d.options.value.fontFamily),d.setValue("font-family",d.options.value.fontFamily)),d.options.value.color&&(d.$colorpicker.spectrum("set",d.options.value.color),d.setValue("color",d.options.value.color)),d.options.value.underline&&(d.$widget.find("input[data-style-customizer-field=underline]").prop("checked",!0),d.setValue("underline","1")),d.options.value.uppercase&&(d.$widget.find("input[data-style-customizer-field=uppercase]").prop("checked",!0),d.setValue("uppercase","1")),d.options.value.italic&&(d.$widget.find("input[data-style-customizer-field=italic]").prop("checked",!0),d.setValue("italic","1")),d.options.value.bold&&(d.$widget.find("input[data-style-customizer-field=bold]").prop("checked",!0),d.setValue("bold","1")),d.options.value.fontSize){var e=d.$widget.find("div[data-style-customizer-field=font-size]"),f=e.find("div.ccm-style-customizer-slider");f.slider("value",d.options.value.fontSize.value),e.find("span.ccm-style-customizer-slider-value span.ccm-style-customizer-number").html(d.options.value.fontSize.value),e.find("span.ccm-style-customizer-slider-value span.ccm-style-customizer-unit").html(d.options.value.fontSize.unit),d.setValue("font-size",d.options.value.fontSize.value)}if(d.options.value.letterSpacing){var e=d.$widget.find("div[data-style-customizer-field=letter-spacing]"),f=e.find("div.ccm-style-customizer-slider");f.slider("value",d.options.value.letterSpacing.value),e.find("span.ccm-style-customizer-slider-value span.ccm-style-customizer-number").html(d.options.value.letterSpacing.value),e.find("span.ccm-style-customizer-slider-value span.ccm-style-customizer-unit").html(d.options.value.letterSpacing.unit),d.setValue("letter-spacing",d.options.value.letterSpacing.value)}if(d.options.value.lineHeight){var e=d.$widget.find("div[data-style-customizer-field=line-height]"),f=e.find("div.ccm-style-customizer-slider");f.slider("value",d.options.value.lineHeight.value),e.find("span.ccm-style-customizer-slider-value span.ccm-style-customizer-number").html(d.options.value.lineHeight.value),e.find("span.ccm-style-customizer-slider-value span.ccm-style-customizer-unit").html(d.options.value.lineHeight.unit),d.setValue("line-height",d.options.value.lineHeight.value)}d.updateSwatch()}c.prototype=Object.create(ConcreteStyleCustomizerPalette.prototype),c.prototype.fonts=["Arial","Helvetica","Georgia","Verdana","Trebuchet MS","Book Antiqua","Tahoma","Times New Roman","Courier New","Arial Black","Comic Sans MS"],c.prototype.chooseTemplate='<div class="ccm-style-customizer-typography-swatch-wrapper" data-launch="style-customizer-palette"><input type="hidden" name="<%=options.inputName%>[font-family]" data-style-customizer-input="font-family" /><input type="hidden" name="<%=options.inputName%>[color]" data-style-customizer-input="color" /><input type="hidden" name="<%=options.inputName%>[bold]" data-style-customizer-input="bold" /><input type="hidden" name="<%=options.inputName%>[italic]" data-style-customizer-input="italic" /><input type="hidden" name="<%=options.inputName%>[underline]" data-style-customizer-input="underline" /><input type="hidden" name="<%=options.inputName%>[uppercase]" data-style-customizer-input="uppercase" /><input type="hidden" name="<%=options.inputName%>[font-size]" data-style-customizer-input="font-size" /><input type="hidden" name="<%=options.inputName%>[letter-spacing]" data-style-customizer-input="letter-spacing" /><input type="hidden" name="<%=options.inputName%>[line-height]" data-style-customizer-input="line-height" /><span class="ccm-style-customizer-typography-swatch">T</span></div>',c.prototype.selectorWidgetTemplate='<div class="ccm-ui ccm-style-customizer-palette"><div><select data-style-customizer-field="font"><option value="">Choose Font</option></select> <input type="text" data-style-customizer-field="color"></div><div class="checkbox"><label><input type="checkbox" class="ccm-flat-checkbox" data-style-customizer-field="bold"> Bold</label></div><div class="checkbox"><label><input type="checkbox" class="ccm-flat-checkbox" data-style-customizer-field="italic"> Italic</label></div><div class="checkbox"><label><input type="checkbox" class="ccm-flat-checkbox" data-style-customizer-field="underline"> Underline</label></div><div class="checkbox"><label><input type="checkbox" class="ccm-flat-checkbox" data-style-customizer-field="uppercase"> Uppercase</label></div><div><label>Font Size</label><div data-style-customizer-field="font-size"><div class="ccm-style-customizer-slider"></div><span class="ccm-style-customizer-slider-value"><span class="ccm-style-customizer-number"></span><span class="ccm-style-customizer-unit">px</span></span></div></div><div><label>Letter Spacing</label><div data-style-customizer-field="letter-spacing"><div class="ccm-style-customizer-slider"></div><span class="ccm-style-customizer-slider-value"><span class="ccm-style-customizer-number"></span><span class="ccm-style-customizer-unit">px</span></span></div></div><div><label>Line Height</label><div data-style-customizer-field="line-height"><div class="ccm-style-customizer-slider"></div><span class="ccm-style-customizer-slider-value"><span class="ccm-style-customizer-number"></span><span class="ccm-style-customizer-unit">px</span></span></div></div><div class="ccm-style-customizer-palette-actions"><button class="btn btn-primary">Save</button></div></div>',c.prototype.updateSwatch=function(){var a=this,b=a.$element.find("span.ccm-style-customizer-typography-swatch");b.css("font-family",a.getValue("font-family")),b.css("color",a.getValue("color")),b.css("font-weight","inherit"),b.css("font-style","inherit"),b.css("text-decoration","inherit"),b.css("text-transform","inherit"),"1"===a.getValue("bold")&&b.css("font-weight","bold"),"1"===a.getValue("italic")&&b.css("font-style","italic"),"1"===a.getValue("underline")&&b.css("text-decoration","underline"),"1"===a.getValue("uppercase")&&b.css("text-transform","uppercase"),b.css("line-height",a.getValue("line-height")+a.options.unit),b.css("letter-spacing",a.getValue("letter-spacing")+a.options.unit),b.css("font-size",a.getValue("font-size")+a.options.unit)},c.prototype.save=function(a){var b=this;b.setValue("font-family",b.$fontMenu.val()),b.setValue("color",b.$widget.find("input[data-style-customizer-field=color]").spectrum("get")),b.setValue("bold",b.$widget.find("input[data-style-customizer-field=bold]").is(":checked")?"1":0),b.setValue("italic",b.$widget.find("input[data-style-customizer-field=italic]").is(":checked")?"1":0),b.setValue("underline",b.$widget.find("input[data-style-customizer-field=underline]").is(":checked")?"1":0),b.setValue("uppercase",b.$widget.find("input[data-style-customizer-field=uppercase]").is(":checked")?"1":0),b.setValue("font-size",b.$widget.find("div[data-style-customizer-field=font-size] div.ccm-style-customizer-slider").slider("value")),b.setValue("letter-spacing",b.$widget.find("div[data-style-customizer-field=letter-spacing] div.ccm-style-customizer-slider").slider("value")),b.setValue("line-height",b.$widget.find("div[data-style-customizer-field=line-height] div.ccm-style-customizer-slider").slider("value")),b.updateSwatch(),b.closeSelector(a)},b.fn.concreteTypographySelector=function(a){return b.each(b(this),function(){new c(b(this),a)})},a.ConcreteTypographySelector=c}(this,$);